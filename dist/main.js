(()=>{"use strict";(()=>{const e=document.querySelector("ul"),t=()=>{e.classList.toggle("menu-active"),e.classList.toggle("animate__animated"),e.classList.toggle("animate__bounceInDown")};document.addEventListener("click",(n=>{let o=n.target;o.matches(".club-select p")?t():(o=o.closest(".club-select"),!o&&e.classList.contains("menu-active")&&t())}))})(),(()=>{const e=document.querySelector(".fixed-gift"),t=document.getElementById("gift"),n=document.querySelector("#gift .form-content");e&&(e.addEventListener("click",(()=>{document.documentElement.clientWidth>768?(e.style.display="none",n.classList.add("animate__animated"),n.classList.add("animate__bounceIn"),t.style.display="block"):(e.style.display="none",t.style.display="block")})),t.addEventListener("click",(e=>{let n=e.target;n.matches(".close_icon")||n.matches(".close-btn")?t.style.display="none":(n=n.closest(".form-content"),n||(t.style.display="none"))})))})(),(()=>{const e=document.querySelector(".menu-button img"),t=document.querySelector(".popup-menu"),n=document.querySelector(".top-menu");e.addEventListener("click",(()=>{t.classList.add("animate__animated"),t.classList.add("animate__fadeIn"),t.classList.add("animate__faster"),t.style.display="flex"})),t.addEventListener("click",(e=>{const n=e.target;(n.matches(".close-menu-btn img")||n.matches(".popup-menu li a"))&&(t.style.display="none")})),window.addEventListener("scroll",(()=>{document.documentElement.clientWidth<768&&document.documentElement.scrollTop>n.offsetTop?n.classList.add("burger__fixed"):n.classList.remove("burger__fixed")}))})(),(()=>{const e=(e,t)=>{e.preventDefault();const n=t.getAttribute("href");document.querySelector(n).scrollIntoView({behavior:"smooth",block:"start"})};document.addEventListener("click",(t=>{let n=t.target;n.matches('a[href*="#"]')&&!n.matches(".open-popup")?e(t,n):(n=n.closest("#totop"),n&&e(t,n))}))})(),(()=>{const e=document.getElementById("totop");e.style.display="none",window.addEventListener("scroll",(()=>{window.pageYOffset>document.getElementById("header").offsetHeight?e.style.display="block":e.style.display="none"}))})(),(()=>{const e=document.querySelector(".open-popup"),t=document.getElementById("free_visit_form");e.addEventListener("click",(()=>{t.style.display="block"})),t.addEventListener("click",(e=>{let n=e.target;n.matches(".close-form img")?t.style.display="none":(n=n.closest(".form-content"),n||(t.style.display="none"))}))})(),(()=>{const e=document.querySelector(".callback-btn"),t=document.getElementById("callback_form");e.addEventListener("click",(()=>{t.style.display="block"})),t.addEventListener("click",(e=>{let n=e.target;n.matches(".close-form img")?t.style.display="none":(n=n.closest(".form-content"),n||(t.style.display="none"))}))})(),(()=>{if(document.getElementById("price-total")){const e=document.getElementById("card_order"),t=document.querySelectorAll("input[name='card-type']"),n=document.getElementById("price-total"),o=document.getElementById("promo"),c=e=>e.match(/class="cost">\d+<span/g).filter((e=>!e.includes("day"))).map((e=>+e.replace(/\D/g,""))),s=e=>{t.forEach(((t,c)=>{t.dataset.price=e[c],t.checked&&(n.textContent=t.dataset.price,"ТЕЛО2020"===o.value&&(n.textContent=Math.round(.7*t.dataset.price)))})),document.querySelector(".time").addEventListener("change",(e=>{const t=e.target;t&&(n.textContent=t.dataset.price,"ТЕЛО2020"===o.value&&(n.textContent=Math.round(.7*t.dataset.price)))}))};fetch("./mozaika.html").then((e=>{if(200!==e.status)throw new Error("Network failed");return e.text()})).then((e=>c(e))).then((e=>{s(e)})).catch((e=>{console.error(e)})),e.addEventListener("change",(e=>{const t=e.target;t.matches("#card_leto_mozaika")&&fetch("./mozaika.html").then((e=>{if(200!==e.status)throw new Error("Network failed");return e.text()})).then((e=>c(e))).then((e=>{s(e)})).catch((e=>{console.error(e)})),t.matches("#card_leto_schelkovo")&&fetch("./schelkovo.html").then((e=>{if(200!==e.status)throw new Error("Network failed");return e.text()})).then((e=>c(e))).then((e=>{s(e)})).catch((e=>{console.error(e)}))})),o.addEventListener("input",(e=>{"ТЕЛО2020"===o.value?(o.style.border="2px solid green",n.textContent=Math.round(.7*n.textContent)):(o.style.border="",t.forEach((e=>{e.checked&&(n.textContent=e.dataset.price)})))}))}})()})();