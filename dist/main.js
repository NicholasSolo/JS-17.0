(()=>{"use strict";(()=>{const e=document.querySelector("ul"),t=()=>{e.classList.toggle("menu-active"),e.classList.toggle("animate__animated"),e.classList.toggle("animate__bounceInDown")};document.addEventListener("click",(o=>{let s=o.target;s.matches(".club-select p")?t():(s=s.closest(".club-select"),!s&&e.classList.contains("menu-active")&&t())}))})(),(()=>{const e=document.querySelector(".fixed-gift"),t=document.getElementById("gift"),o=document.querySelector("#gift .form-content"),s=()=>{t.classList.toggle("popup_opened")};e&&(e.addEventListener("click",(()=>{document.documentElement.clientWidth>768?(e.style.display="none",o.classList.add("animate__animated"),o.classList.add("animate__bounceIn"),s()):(e.style.display="none",s())})),t.addEventListener("click",(e=>{let t=e.target;t.matches(".close_icon")||t.matches(".close-btn")?s():(t=t.closest(".form-content"),t||s())})))})(),(()=>{const e=document.querySelector(".menu-button img"),t=document.querySelector(".popup-menu"),o=document.querySelector(".top-menu");e.addEventListener("click",(()=>{t.classList.add("animate__animated"),t.classList.add("animate__fadeIn"),t.classList.add("animate__faster"),t.style.display="flex"})),t.addEventListener("click",(e=>{const o=e.target;(o.matches(".close-menu-btn img")||o.matches(".popup-menu li a"))&&(t.style.display="none")})),window.addEventListener("scroll",(()=>{document.documentElement.clientWidth<768&&document.documentElement.scrollTop>o.offsetTop?o.classList.add("burger__fixed"):o.classList.remove("burger__fixed")}))})(),(()=>{const e=(e,t)=>{e.preventDefault();const o=t.getAttribute("href");document.querySelector(o).scrollIntoView({behavior:"smooth",block:"start"})};document.addEventListener("click",(t=>{let o=t.target;o.matches('a[href*="#"]')&&!o.matches(".open-popup")?e(t,o):(o=o.closest("#totop"),o&&e(t,o))}))})(),(()=>{const e=document.getElementById("totop");e.style.display="none",window.addEventListener("scroll",(()=>{window.pageYOffset>document.getElementById("header").offsetHeight?e.style.display="block":e.style.display="none"}))})(),(()=>{const e=document.querySelector(".open-popup"),t=document.getElementById("free_visit_form");e.addEventListener("click",(()=>{t.classList.add("popup_opened")})),t.addEventListener("click",(e=>{let o=e.target;o.matches(".close-form img")?(t.classList.remove("popup_opened"),t.querySelector("#personalDataAgreement")&&t.querySelector("#personalDataAgreement").classList.remove("popup_opened"),t.querySelectorAll("input").forEach((e=>{e.value="","checkbox"===e.type&&!0===e.checked&&(e.checked=!1)}))):(o=o.closest(".form-content"),o||(t.classList.remove("popup_opened"),t.querySelector("#personalDataAgreement")&&t.querySelector("#personalDataAgreement").classList.remove("popup_opened"),t.querySelectorAll("input").forEach((e=>{e.value="","checkbox"===e.type&&!0===e.checked&&(e.checked=!1)}))))}))})(),(()=>{const e=document.querySelector(".callback-btn"),t=document.getElementById("callback_form");e.addEventListener("click",(()=>{t.classList.add("popup_opened")})),t.addEventListener("click",(e=>{let o=e.target;o.matches(".close-form img")?(t.classList.remove("popup_opened"),t.querySelector("#personalDataAgreement")&&t.querySelector("#personalDataAgreement").classList.remove("popup_opened"),t.querySelectorAll("input").forEach((e=>{e.value="","checkbox"===e.type&&!0===e.checked&&(e.checked=!1)}))):(o=o.closest(".form-content"),o||(t.classList.remove("popup_opened"),t.querySelector("#personalDataAgreement")&&t.querySelector("#personalDataAgreement").classList.remove("popup_opened"),t.querySelectorAll("input").forEach((e=>{e.value="","checkbox"===e.type&&!0===e.checked&&(e.checked=!1)}))))}))})(),(()=>{if(document.getElementById("price-total")){const e=document.getElementById("card_order"),t=document.querySelectorAll("input[name='card-type']"),o=document.getElementById("price-total"),s=document.getElementById("promo"),n=e=>e.match(/class="cost">\d+<span/g).filter((e=>!e.includes("day"))).map((e=>+e.replace(/\D/g,""))),r=e=>{t.forEach(((t,n)=>{t.dataset.price=e[n],t.checked&&(o.textContent=t.dataset.price,"ТЕЛО2020"===s.value&&(o.textContent=Math.round(.7*t.dataset.price)))})),document.querySelector(".time").addEventListener("change",(e=>{const t=e.target;t&&(o.textContent=t.dataset.price,"ТЕЛО2020"===s.value&&(o.textContent=Math.round(.7*t.dataset.price)))}))};fetch("./mozaika.html").then((e=>{if(200!==e.status)throw new Error("Network failed");return e.text()})).then((e=>n(e))).then((e=>{r(e)})).catch((e=>{console.error(e)})),e.addEventListener("change",(e=>{const t=e.target;t.matches("#card_leto_mozaika")&&fetch("./mozaika.html").then((e=>{if(200!==e.status)throw new Error("Network failed");return e.text()})).then((e=>n(e))).then((e=>{r(e)})).catch((e=>{console.error(e)})),t.matches("#card_leto_schelkovo")&&fetch("./schelkovo.html").then((e=>{if(200!==e.status)throw new Error("Network failed");return e.text()})).then((e=>n(e))).then((e=>{r(e)})).catch((e=>{console.error(e)}))})),s.addEventListener("input",(e=>{"ТЕЛО2020"===s.value?(s.style.border="2px solid green",o.textContent=Math.round(.7*o.textContent)):(s.style.border="",t.forEach((e=>{e.checked&&(o.textContent=e.dataset.price)})))}))}})(),(()=>{const e=document.getElementById("form1"),t=document.getElementById("form2"),o=document.querySelector(".preloader"),s=document.getElementById("card_order"),n=document.getElementById("thanks"),r=document.getElementById("thanks__error"),i=document.getElementById("promo"),a=document.getElementById("price-total"),l=document.querySelectorAll("input[name='card-type']");n.addEventListener("click",(e=>{let t=e.target;t.matches(".close-form img")||t.matches("#thanks .close-btn")?n.classList.remove("popup_opened"):(t=t.closest(".form-content"),t||n.classList.remove("popup_opened"))})),r.addEventListener("click",(e=>{let t=e.target;t.matches(".close-form img")||t.matches("#thanks__error .close-btn")?r.classList.remove("popup_opened"):(t=t.closest(".form-content"),t||r.classList.remove("popup_opened"))}));const c=(c,d)=>{if(d.preventDefault(),c.querySelector("[name='name']")&&(c.querySelector("[type='tel']").value.length<6||c.querySelector("[name='name']").value.length<2))return;if(c.querySelector("#callback_footer_form-phone")&&(console.log(6565656565),c.querySelector("[type='tel']").value.length<6))return;const p=c.querySelector("[type='checkbox']"),m=c.querySelector("#personalDataAgreement");if(p&&!1===p.checked)return m.classList.add("popup_opened"),void(c===s&&(m.style.color="black",m.style.textAlign="left"));m&&m.classList.remove("popup_opened"),c===s&&i&&(i.style.border="",l.forEach((e=>{e.checked&&(a.textContent=e.dataset.price)}))),c.append(o),o.style.display="block";const h=new FormData(c),u={};for(const e of h.entries())u[e[0]]=e[1];(e=>fetch("./server.php",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)}))(u).then((s=>{if(200!==s.status)throw new Error("network failed");o.style.display="none",c===e||c===t?(c.parentElement.parentElement.parentElement.classList.remove("popup_opened"),n.classList.add("popup_opened"),setTimeout((()=>{n.classList.remove("popup_opened")}),5e3)):(n.classList.add("popup_opened"),setTimeout((()=>{n.classList.remove("popup_opened")}),5e3))})).catch((s=>{console.error(s),o.style.display="none",c===e||c===t?(c.parentElement.parentElement.parentElement.classList.remove("popup_opened"),r.classList.add("popup_opened"),setTimeout((()=>{r.classList.remove("popup_opened")}),5e3)):(r.classList.add("popup_opened"),setTimeout((()=>{r.classList.remove("popup_opened")}),5e3))})),c.querySelectorAll("input").forEach((e=>{e.value="","checkbox"===e.type&&(e.checked=!1)}))};document.addEventListener("submit",(e=>{const t=e.target;t.matches("#form1")&&c(t,e),t.matches("#form2")&&c(t,e),t.matches("#banner-form")&&c(t,e),t.matches("#card_order")&&c(t,e),t.matches("#footer_form")&&c(t,e)}))})(),document.addEventListener("input",(e=>{const t=e.target;t.matches("input[type='tel']")&&(t.value=t.value.replace(/[^\d+]/g,""),t.value.length>12&&(t.value=t.value.slice(0,12))),t.matches("input[name='name']")&&!t.matches("input#promo")&&(t.value=t.value.replace(/[^а-яё\s]/gi,"").replace(/\s+/g," ").replace(/^\s/g,""))})),document.addEventListener("blur",(e=>{const t=e.target;if(t.matches("input[type='tel']")&&"+"!==t.value.charAt(0)&&"7"!==t.value.charAt(1)&&(t.value="+7"+t.value.slice(2)),t.matches("input[name='name']")&&!t.matches("input#promo")&&""!==t.value.trim()){let e=t.value.split(/\s+/);if(e.length){let o=e.map((e=>{if(""!=e)return e[0].toUpperCase()+e.slice(1).toLowerCase()}));t.value=o.join(" ").replace(/\s$/g,"")}}}),!0),(()=>{const e=document.querySelector(".main-slider"),t=e.querySelectorAll(".slide"),o=[];let s,n=0;(()=>{const e=document.querySelector(".header_slider-dots");for(let s=0;s<t.length;s++){const t=document.createElement("li");t.classList.add("dot"),0===s&&t.classList.add("dot-active"),o.push(t),e.appendChild(t)}})();const r=(e,t,o)=>{e[t].style.display=o},i=(e,t,o)=>{e[t].style.display=o},a=(e,t,o)=>{e[t].classList.remove(o)},l=(e,t,o)=>{e[t].classList.add(o)},c=()=>{r(t,n,"none"),a(o,n,"dot-active"),n++,n>=t.length&&(n=0),i(t,n,"block"),l(o,n,"dot-active")},d=(e=2e3)=>{s=setInterval(c,e)};e.addEventListener("click",(e=>{e.preventDefault();const s=e.target;s.matches(".dot")&&(r(t,n,"none"),a(o,n,"dot-active"),s.matches(".dot")&&o.forEach(((e,t)=>{e===s&&(n=t)})),n>=t.length&&(n=0),n<0&&(n=t.length-1),i(t,n,"block"),l(o,n,"dot-active"))})),e.addEventListener("mouseover",(e=>{e.target.matches(".dot")&&clearInterval(s)})),e.addEventListener("mouseout",(e=>{e.target.matches(".dot")&&d(5e3)})),d(5e3)})(),(()=>{const e=document.querySelector("#gallery .wrapper"),t=e.querySelectorAll(".slide"),o=[];let s,n=0;(()=>{const e=document.querySelector(".slider-dots");for(let s=0;s<t.length;s++){const t=document.createElement("li");t.classList.add("dot"),0===s&&t.classList.add("dot-active"),o.push(t),e.appendChild(t)}})();const r=(e,t,o)=>{e[t].classList.remove(o)},i=(e,t,o)=>{e[t].classList.add(o)},a=()=>{r(t,n,"slide_active"),r(o,n,"dot-active"),n++,n>=t.length&&(n=0),i(t,n,"slide_active"),i(o,n,"dot-active")},l=(e=2e3)=>{s=setInterval(a,e)};e.addEventListener("click",(e=>{e.preventDefault();const s=e.target;s.matches(".dot, .gallery_button")&&(r(t,n,"slide_active"),r(o,n,"dot-active"),s.matches("#arrow-right")?n++:s.matches("#arrow-left")?n--:s.matches(".dot")&&o.forEach(((e,t)=>{e===s&&(n=t)})),n>=t.length&&(n=0),n<0&&(n=t.length-1),i(t,n,"slide_active"),i(o,n,"dot-active"))})),e.addEventListener("mouseover",(e=>{(e.target.matches(".gallery_button")||e.target.matches(".dot"))&&clearInterval(s)})),e.addEventListener("mouseout",(e=>{(e.target.matches(".gallery_button")||e.target.matches(".dot"))&&l(5e3)})),l(5e3)})(),new class{constructor({main:e,wrapper:t,next:o,prev:s,infiniteSlide:n=!1,slidesToShow:r=3,position:i=0,responsive:a=[]}){this.main=document.querySelector(e),this.wrapper=document.querySelector(t),this.slides=Array.from(this.wrapper.children),this.next=document.querySelector(o),this.prev=document.querySelector(s),this.slidesToShow=r,this.options={position:i,infiniteSlide:n,sliderWidth:Math.trunc(100/this.slidesToShow),maxPosition:this.slides.length-this.slidesToShow},this.responsive=a}addClass(){this.main.classList.add("slider"),this.wrapper.classList.add("slider__wrapper"),this.slides.forEach((e=>{e.classList.add("slider__item")}))}generateStyles(){let e=document.getElementById("slider-style");e||(e=document.createElement("style"),e.id="slider-style"),e.textContent=`\n        .slider{\n          overflow: hidden;\n        }\n        .slider__wrapper{\n          display: flex;\n          transition: transform 0.5s;\n          will-change: transform;\n        }\n        .slider__item{\n          flex: 0 0 ${this.options.sliderWidth}%;\n        }\n        .slider__prev, .slider__next {\n          margin: 0 10px;\n          border: 20px solid transparent;\n          background: transparent;\n          outline:none;\n          cursor:pointer;\n        }\n        .slider__next{\n          border-left-color: #19b5fe;\n        }\n        .slider__prev{\n          border-right-color: #19b5fe;\n        }\n      `,document.head.append(e)}controlSlider(){this.prev.addEventListener("click",(()=>{this.prevSlide()})),this.next.addEventListener("click",(()=>{this.nextSlide()}))}prevSlide(){(this.options.infiniteSlide||this.options.position>0)&&(--this.options.position,this.options.position<0&&(this.options.position=this.options.maxPosition),this.wrapper.style.transform=`translateX(-${this.options.position*this.options.sliderWidth}%)`)}nextSlide(){(this.options.infiniteSlide||this.options.position<this.options.maxPosition)&&(++this.options.position,this.options.position>this.options.maxPosition&&(this.options.position=0),this.wrapper.style.transform=`translateX(-${this.options.position*this.options.sliderWidth}%)`)}addArrows(){this.prev=document.createElement("button"),this.next=document.createElement("button"),this.prev.className="slider__prev",this.next.className="slider__next",this.main.append(this.prev),this.main.append(this.next)}responseInit(){const e=this.slidesToShow,t=this.responsive.map((e=>e.breakpoint)),o=Math.max(...t),s=()=>{const s=document.documentElement.clientWidth;if(s<o)for(let e=0;e<t.length;e++)s<t[e]&&(this.slidesToShow=this.responsive[e].slideToShow,this.options.sliderWidth=Math.floor(100/this.slidesToShow),this.generateStyles());else this.slidesToShow=e,this.options.sliderWidth=Math.floor(100/this.slidesToShow),this.generateStyles()};s(),window.addEventListener("resize",(()=>{s()}))}init(){this.addClass(),this.generateStyles(),this.prev&&this.next||this.addArrows(),this.controlSlider(),this.responsive&&this.responseInit()}}({main:".services-slider-wrapper",wrapper:".services-slider",next:"#service-arrow-right",prev:"#service-arrow-left",infiniteSlide:!0,slidesToShow:5,responsive:[{breakpoint:1024,slideToShow:3},{breakpoint:768,slideToShow:2},{breakpoint:576,slideToShow:1}]}).init()})();